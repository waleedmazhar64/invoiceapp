{"version":3,"sources":["./src/app/pages/logs/logs.page.html","./src/app/pages/logs/logs-routing.module.ts","./src/app/pages/logs/logs.module.ts","./src/app/pages/logs/logs.page.scss","./src/app/pages/logs/logs.page.ts"],"names":[],"mappings":"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","file":"logs-logs-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button></ion-menu-button>\\n      </ion-buttons>\\n      <ion-title>Logs</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content>\\n<!-- <ion-label>hi there <a (click)=\\\"openClient()\\\">Saad</a>  </ion-label> -->\\n<ion-list *ngFor=\\\"let item of logs,index as pos\\\">\\n  <ion-item>\\n    <p style=\\\"font-size: medium;color: black;\\\">{{item.actionType}} <a (click)=\\\"openClient(item)\\\">{{item.name}}</a><br /><span style=\\\"color: grey;font-size: small;\\\">{{item.dated}}</span></p>\\n  </ion-item>\\n</ion-list>\\n<ion-infinite-scroll threshold=\\\"5%\\\" (ionInfinite)=\\\"doInfinite($event)\\\">\\n  <ion-infinite-scroll-content loadingSpinner=\\\"crescent\\\" loadingText=\\\"loading more...\\\"></ion-infinite-scroll-content>\\n</ion-infinite-scroll>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LogsPage } from './logs.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LogsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LogsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HTTP } from '@ionic-native/http/ngx'\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LogsPageRoutingModule } from './logs-routing.module';\n\nimport { LogsPage } from './logs.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LogsPageRoutingModule\n  ],\n  providers: [\n    HTTP\n  ],\n  declarations: [LogsPage]\n})\nexport class LogsPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ3MvbG9ncy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { HTTP } from '@ionic-native/http/ngx'\nimport { HttpClient } from '@angular/common/http';\nimport { Platform, LoadingController, NavController, Events } from '@ionic/angular';\nimport { filter } from 'rxjs/operators';\nimport { finalize } from 'rxjs/operators';\nimport { DatabaseService} from 'src/app/services/database.service';\nimport { from } from 'rxjs';\nimport { SyncService } from 'src/app/services/sync.service';\nimport { Router, NavigationStart } from '@angular/router';\n\n@Component({\n  selector: 'app-logs',\n  templateUrl: './logs.page.html',\n  styleUrls: ['./logs.page.scss'],\n})\nexport class LogsPage implements OnInit {\n\n  page = 0;\n  maximumPages = 1;\n  refresh = false;\n  infiniteScroll: any;\n  logs = [];\n  sentences = [];\n  records = 0;\n  totalRecords = 0;\n  subscription;\n\n  constructor(\n    private router: Router,\n    private http: HttpClient,\n    private nativeHttp: HTTP,\n    private plt: Platform,\n    private databaseprovider: DatabaseService,\n    private syncService: SyncService,\n    private loadingController: LoadingController,\n    private platform: Platform,\n    private nav: NavController,\n    private events: Events\n\n  ) {\n    events.subscribe('refreshLogs', (user, time) => {\n      this.infiniteScroll.target.disabled = false;\n      this.page = 0;\n      this.maximumPages = 1;\n      this.refresh = false;\n      this.logs = [];\n      this.sentences = [];\n      this.records = 0;\n      this.totalRecords = 0;\n      this.getAllLogs();\n    });\n    debugger\n    // this.subscription = this.router.events.pipe(\n    //   filter(event => event instanceof NavigationStart)\n    // ).subscribe((route: NavigationStart) => {\n\n    //   this.page = 0;\n    //   this.maximumPages = 1;\n    //   this.refresh = false;\n    //   this.logs = [];\n    //   this.sentences = [];\n    //   this.records = 0;\n    //   this.totalRecords = 0;\n    //   this.getAllLogs();\n    //   // alert('page:' + this.page + '\\n' +\n    //   // 'maximumPages:' + this.maximumPages + '\\n' +\n    //   // 'refresh:' + this.refresh + '\\n' +\n    //   // 'logs:' + this.logs + '\\n' +\n    //   // 'sentences:' + this.sentences + '\\n' +\n    //   // 'records:' + this.records + '\\n' +\n    //   // 'totalRecords:' + this.totalRecords + '\\n'\n    //   // )\n    // });\n    if (this.logs.length === 0 || this.databaseprovider.getlogs() === 1) {\n\n      this.page = 0;\n      this.maximumPages = 1;\n      this.refresh = false;\n      this.logs = [];\n      this.sentences = [];\n      this.records = 0;\n      this.totalRecords = 0;\n      this.getAllLogs();\n\n    }\n   }\n\n  ngOnInit() {\n  }\n  openClient(item) {\n   this.databaseprovider.setLogsnav(1);\n\n   debugger\n   if (item.tableName === 'clients') {\n    this.syncService.getClient(item.tableId, '/menu/logs');\n   }\n   if (item.tableName === 'items') {\n    this.syncService.getItem(item.tableId, '/menu/logs');\n  }\n   if (item.tableName === 'vendors') {\n    this.syncService.getVendor(item.tableId);\n  }\n   if (item.tableName === 'tblpurchasedorder') {\n    this.syncService.getPO(item.tableId);\n  }\n   if (item.tableName === 'invoices') {\n    this.syncService.getInvoice(item.tableId,'/menu/logs');\n  }\n   if (item.tableName === 'tblledger') {\n    this.syncService.getLedger(item.tableId);\n  }\n   if (item.tableName === 'tblledgervendors') {\n    this.syncService.getLedgerVendor(item.tableId);\n  }\n   if (item.tableName === 'tblexpenses') {\n    this.syncService.getExpense(item.tableId);\n  }\n   if (item.tableName === 'tblUsers') {\n    this.syncService.getUser(item.tableId, '/menu/logs');\n  }\n\n  }\n  \n  async getAllLogs() {\n    console.log('infinite: ' + this.infiniteScroll);\n    let loading = await this.loadingController.create();\n    await loading.present();\n    this.syncService.getLogsPagination(this.records).then((data) => {\n      debugger\n      loading.dismiss();\n      this.page++;\n      this.logs = data;\n      this.totalRecords = data[0].Total;\n      this.maximumPages = 1;\n      this.records = this.records + 10;\n      // alert('total:' + this.totalRecords + '\\n current: ' + this.records);\n    });\n  }\n  doInfinite(infiniteScroll) {\n    this.infiniteScroll = infiniteScroll;\n    debugger\n    // alert('total:' + this.totalRecords + '\\n current: ' + this.records);\n    if (this.totalRecords <= this.records) {\n      infiniteScroll.target.disabled = true;\n\n\n    } else {\n      debugger\n      this.page++;\n      this.syncService.getLogsPagination(this.records).then((data) => {\n        this.logs = this.logs.concat(data);\n        infiniteScroll.target.complete();\n        this.records = this.records + 10;\n\n      });\n    }\n  }\n  ionViewDidEnter() {\n    this.subscription = this.router.events.pipe(\n      filter(event => event instanceof NavigationStart)\n    ).subscribe((route: NavigationStart) => {\n\n      this.page = 0;\n      this.maximumPages = 1;\n      this.refresh = false;\n      this.logs = [];\n      this.sentences = [];\n      this.records = 0;\n      this.totalRecords = 0;\n      this.getAllLogs();\n      // alert('page:' + this.page + '\\n' +\n      // 'maximumPages:' + this.maximumPages + '\\n' +\n      // 'refresh:' + this.refresh + '\\n' +\n      // 'logs:' + this.logs + '\\n' +\n      // 'sentences:' + this.sentences + '\\n' +\n      // 'records:' + this.records + '\\n' +\n      // 'totalRecords:' + this.totalRecords + '\\n'\n      // )\n    });\n  }\n  ionViewWillLeave() {\n    this.subscription.unsubscribe();\n    this.databaseprovider.setlogs(1);\n\n  }\n\n\n}\n"],"sourceRoot":""}