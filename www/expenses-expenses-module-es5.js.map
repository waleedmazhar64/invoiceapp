{"version":3,"sources":["./src/app/pages/expenses/expenses.page.html","./src/app/pages/expenses/expenses.module.ts","./src/app/pages/expenses/expenses.page.scss","./src/app/pages/expenses/expenses.page.ts"],"names":[],"mappings":"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","file":"expenses-expenses-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button *ngIf=\\\"s == 0\\\"></ion-menu-button>\\n        <ion-icon padding  *ngIf=\\\"s == 1\\\" (click)=\\\"s = 0\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-buttons>\\n      <ion-title *ngIf=\\\"s == 0\\\">Expenses(s)</ion-title>\\n      <ion-icon slot=\\\"end\\\" name=\\\"search\\\" padding (click)=\\\"s=1\\\"></ion-icon>\\n      <ion-input (ionInput)=\\\"geItems($event)\\\" padding placeholder=\\\"Search Invoices\\\" *ngIf=\\\"s == 1\\\"></ion-input>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <ion-fab *ngIf=\\\"showAdd === 1\\\" vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click)=\\\"addIcon()\\\">\\n        <ion-fab-button>\\n          <ion-icon name=\\\"add\\\"></ion-icon>\\n        </ion-fab-button>\\n      </ion-fab>\\n    \\n          <ion-virtual-scroll [items]=\\\"tempExpenses\\\" approxItemHeight=\\\"70px\\\" >\\n   \\n\\n              <ion-item-sliding *virtualItem=\\\"let expenses;index as pos\\\" >\\n                  <!-- <ion-item-options side=\\\"start\\\">\\n                      <ion-item-option (click)=\\\"edit(expenses)\\\">Edit</ion-item-option>\\n                      <ion-item-option color=\\\"danger\\\" (click)=\\\"delete(expenses)\\\">Delete</ion-item-option>\\n          \\n                    </ion-item-options> -->\\n              <ion-item (click)=\\\"itemClicked(expenses,pos)\\\">\\n                \\n                  <img padding src=\\\"assets/expenses.png\\\">\\n                  <ion-label>\\n                    <h2 text-capitalize>{{ expenses.Name }}</h2>\\n                    <p>{{ expenses.Date }}</p>\\n                  </ion-label>\\n                  <!-- <ion-label>\\n                    <h2 text-capitalize style=\\\"visibility: hidden;\\\">{{ expenses.Category }}</h2>\\n                    <p>{{ expenses.Date }}</p>\\n                  </ion-label> -->\\n                  <ion-label>\\n                      <span (click)=\\\"edit()\\\" style=\\\"float:right;\\\">\\n                          {{currency}} {{ expenses.Amount }}\\n                      </span>\\n                  </ion-label>\\n              </ion-item>\\n              </ion-item-sliding>\\n            \\n            </ion-virtual-scroll>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HTTP } from '@ionic-native/http/ngx';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ExpensesPage } from './expenses.page';\n\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ExpensesPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  providers: [\n    CallNumber,\n    HTTP\n  ],\n  declarations: [ExpensesPage]\n})\nexport class ExpensesPageModule {}\n","module.exports = \"ion-icon {\\n  width: 30px;\\n  height: 30px;\\n  color: #ffffff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZXhwZW5zZXMvQzpcXHdhbXA2NFxcd3d3XFxpbnZvaWNlLnBrL3NyY1xcYXBwXFxwYWdlc1xcZXhwZW5zZXNcXGV4cGVuc2VzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZXhwZW5zZXMvZXhwZW5zZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9leHBlbnNlcy9leHBlbnNlcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XHJcbiAgICB3aWR0aDogMzBweDsgLy9QcmVmZXJyZWQgc2l6ZSBoZXJlXHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBjb2xvcjojZmZmZmZmO1xyXG4gIH0iLCJpb24taWNvbiB7XG4gIHdpZHRoOiAzMHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIGNvbG9yOiAjZmZmZmZmO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { NavigationExtras, Router, NavigationStart, ActivatedRoute } from '@angular/router';\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { Platform, LoadingController, AlertController, Events } from '@ionic/angular';\nimport { filter } from 'rxjs/operators';\nimport { finalize } from 'rxjs/operators';\nimport { DatabaseService} from 'src/app/services/database.service';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\nimport { SyncService } from 'src/app/services/sync.service';\nimport { Storage } from '@ionic/storage';\n\n\n@Component({\n  selector: 'app-expenses',\n  templateUrl: './expenses.page.html',\n  styleUrls: ['./expenses.page.scss'],\n})\nexport class ExpensesPage implements OnInit {\n\n  expenses = [];\n  tempExpenses = [];\n  s = 0;\n  currency = '';\n  subscription;\n  showAdd = 0;\n  showDetails = 0;\n  constructor(\n    private router: Router,\n    private nativeHttp: HTTP,\n    private plt: Platform,\n    private loadingCtrl: LoadingController,\n    private databaseprovider: DatabaseService,\n    private callnumber: CallNumber,\n    private syncService: SyncService,\n    private alrtCtrl: AlertController,\n    private storage: Storage,\n    private route: ActivatedRoute,\n    private events: Events\n\n  ) {\n    this.storage.get('app').then((val1) => {\n      if (val1 === 'invoice') {\n        this.storage.get('ID').then((val) => {\n          this.syncService.getbValue(val,'Expense Add').then((data) => {\n            this.showAdd = data[0].bValue;\n          });\n          this.syncService.getbValue(val,'Expense Details').then((data) => {\n            this.showDetails = data[0].bValue;\n          });\n        });\n      } else {\n        this.showAdd = 1;\n        this.showDetails = 1;\n      }\n    });\n    events.subscribe('refreshExpenses', (user, time) => {\n      storage.get('currency').then((val) => {\n        if (val !== null) {\n            this.currency = val.toString();\n        }\n      });\n      this.getAllExpenses();\n    });\n    //    this.router.events.pipe(\n    //   filter(event => event instanceof NavigationStart)\n    // ).subscribe((route: NavigationStart) => {\n    //     console.log('Route: '+route.url);\n    //     const a = this.databaseprovider.getupdateexpenses();\n    //     ;\n    //     storage.get('currency').then((val) => {\n    //       if (val !== null) {\n    //           this.currency = val.toString();\n    //           \n    //       }\n    //     });\n    //     if(route.url === '/menu/expenses' && a === 1) {\n    //       this.getAllExpenses();\n    //     }\n    // });\n    if(this.expenses.length === 0) {\n      ;\n      // this.getDataNativeHttp();\n      storage.get('currency').then((val) => {\n        if (val !== null) {\n            this.currency = val.toString();\n            \n        }\n      });\n      this.getAllExpenses();\n    }\n   // this.sortClients();\n   // this.initializeItems();\n  }\n  ionViewDidEnter() {\n\n      this.subscription = this.router.events.pipe(\n      filter(event => event instanceof NavigationStart)\n    ).subscribe((route: NavigationStart) => {\n        console.log('Route: '+route.url);\n        const a = this.databaseprovider.getupdateexpenses();\n        ;\n        this.storage.get('currency').then((val) => {\n          if (val !== null) {\n              this.currency = val.toString();\n              \n          }\n        });\n        if(route.url === '/menu/expenses' && a === 1) {\n          this.getAllExpenses();\n        }\n    });\n   \n  }\n  ionViewWillLeave() {\n     this.subscription.unsubscribe();\n    // this.databaseprovider.setupdateinvoice(1);\n  }\n  ngOnInit() {\n  }\n  addIcon() {\n    this.router.navigate(['new-expense']);\n  }\n  edit(item) {\n\n  }\n  delete(item) {\n\n  }\n  itemClicked(item) {\n    if (this.showDetails === 1) {\n      this.databaseprovider.setLogsnav(1);\n      \n      const navigationExtras: NavigationExtras = {\n        state: {\n          expense: item,\n          url: '/menu/expenses'\n        }\n      };\n      this.router.navigate(['editexpense'], navigationExtras);\n  \n    }\n    \n  }\n  initializeItems() {\n    console.log('ini');\n    this.tempExpenses = this.expenses;\n  }\n  geItems(searchbar) {\n      this.initializeItems();\n      const q = searchbar.srcElement.value;\n      if (!q) {\n        return;\n      }\n      this.tempExpenses = this.tempExpenses.filter((v) => {\n        if (v.Name && q) {\n          if (v.Name.toLowerCase().indexOf(q.toLowerCase()) > -1) {\n           console.log(\"true\")\n            return true;\n          }\n          console.log(\"false\")\n          return false;\n        }\n      });\n  \n  }\n  sortClients() {\n\n    ;\n    this.expenses = this.expenses.sort((a, b) => {\n      if (a.category < b.category) {\n        return -1;\n      }\n      if (a.category > b.category) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n  async getAllExpenses() {\n    let loading = await this.loadingCtrl.create();\n    await loading.present();\n    this.syncService.getAllExpenses().then((data) => {\n      \n      this.expenses = data;\n      // this.sortClients();\n      this.initializeItems();\n      loading.dismiss();\n    });\n  }\n  \n\n}\n"],"sourceRoot":""}